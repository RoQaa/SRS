(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5790],{21557:function(e,t,a){Promise.resolve().then(a.t.bind(a,65878,23)),Promise.resolve().then(a.bind(a,64503)),Promise.resolve().then(a.bind(a,27966))},33145:function(e,t,a){"use strict";a.d(t,{default:function(){return r.a}});var n=a(48461),r=a.n(n)},48461:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{default:function(){return d},getImageProps:function(){return o}});let n=a(47043),r=a(55346),s=a(65878),i=n._(a(5084));function o(e){let{props:t}=(0,r.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,a]of Object.entries(t))void 0===a&&delete t[e];return{props:t}}let d=s.Image},71432:function(e,t,a){"use strict";var n=a(57437),r=a(27648);t.Z=e=>{let{href:t,btnText:a,extraClasses:s="",target:i="_self",rel:o=""}=e;return(0,n.jsx)(r.default,{href:t,className:"btn ".concat(s),target:i,rel:o,"aria-label":a,children:a})}},64503:function(e,t,a){"use strict";a.d(t,{default:function(){return h}});var n=a(57437),r=a(2265),s=a(33145),i=a(71432),o=a(42586),d=e=>{let{date:t}=e,a=(0,o.useLocale)(),r=new Intl.DateTimeFormat("en"===a?"en-US":"ar",{year:"numeric",month:"long",day:"numeric"}).format("string"==typeof t?new Date(t):t);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("i",{className:"fa-regular fa-calendar"}),(0,n.jsx)("span",{className:"mx-1",children:r})]})},l=(0,r.memo)(e=>{let{title:t,description:a,date:r,imgSrc:l,slug:c,id:u}=e,f=(0,o.useTranslations)(),g=(0,o.useLocale)();return(0,n.jsxs)("div",{className:"news-card",children:[(0,n.jsx)("div",{className:"news-img",children:(0,n.jsx)(s.default,{fill:!0,src:l,alt:t})}),(0,n.jsxs)("div",{className:"news-data",children:[(0,n.jsx)("div",{className:"news-date",children:(0,n.jsx)(d,{date:r})}),(0,n.jsx)("p",{children:a}),(0,n.jsx)(i.Z,{btnText:f("learn_more"),href:"".concat("https://stagingsrv.gazala.net","/").concat(g,"/news/").concat(c,"?id=").concat(u),extraClasses:"",target:"",rel:""})]})]})}),c=a(68161),u=a(45394),f=a(7299),g=a(88302),h=e=>{let{all:t=!1}=e,a=(0,o.useLocale)(),s=(0,u.T)(),{newsData:i}=(0,u.C)(e=>e.news),d=(0,r.useMemo)(()=>Array.isArray(i)?(null==i?void 0:i.filter(e=>e.published)).sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()).slice(0,t?void 0:4).reverse():[],[i,t]);(0,r.useEffect)(()=>{0===i.length&&s((0,f.aL)()).unwrap().catch(e=>console.error("Error fetching news:",e))},[s,i.length]);let h=(0,r.useMemo)(()=>"en"===a?{title:"Latest",highlight:"News"}:{title:"اخر",highlight:"الأخبار"},[a]);return(0,n.jsx)("div",{className:"news mt-3 pb-5",children:(0,n.jsxs)("div",{className:"container",children:[(0,n.jsx)(c.Z,{title:h.title,highlight:h.highlight,extraClasses:"py-3 mb-3"}),(0,n.jsx)("div",{className:"news-container",children:d.length>0&&d.map((e,t)=>{let r="en"===a?e.title:e.title_ar,s=(0,g.j)("en"===a?e.description:e.description_ar).slice(0,46)+"...",i="en"===a?e.slug:e.slug_ar,o=e._id;return(0,n.jsx)(l,{date:e.date,title:r,description:s,imgSrc:"".concat("https://stagingsrv.gazala.net/api","/").concat(e.thumbnail),slug:i,id:o},t)})})]})})}},27966:function(e,t,a){"use strict";var n=a(2265);t.default=e=>{let{locale:t,page:a}=e;return(0,n.useEffect)(()=>{(async()=>{try{let r=await fetch("".concat("https://stagingsrv.gazala.net/api","/seo/findByPage/").concat(a)),s=await r.json();if(s.data){document.title="en"===t?s.data.title_en:s.data.title_ar;let a=document.querySelector('meta[name="description"]');a&&a.setAttribute("content","en"===t?s.data.meta_description_en:s.data.meta_description_ar);let r=document.querySelector('meta[name="keywords"]');if(r){var e,n;let a="en"===t?null===(e=s.data.keywords_en)||void 0===e?void 0:e.join(", "):null===(n=s.data.keywords_ar)||void 0===n?void 0:n.join(", ");r.setAttribute("content",a||"")}["og:title","og:description","og:image"].forEach(e=>{let a=document.querySelector('meta[property="'.concat(e,'"]'));if(a){let n="og:image"===e?s.data.og_image:"en"===t?s.data["".concat(e.split(":")[1],"_en")]:s.data["".concat(e.split(":")[1],"_ar")];a.setAttribute("content",n)}})}}catch(e){console.error("Error updating SEO:",e)}})()},[t,a]),null}},68161:function(e,t,a){"use strict";var n=a(57437),r=a(35292);t.Z=e=>{let{title:t="",highlight:a="",extraClasses:s=""}=e;return(0,n.jsx)("div",{className:"sec-title ".concat(s),children:(0,n.jsxs)("h1",{children:[(0,r.x)(t),a&&(0,n.jsxs)("span",{children:[" ",(0,r.x)(a)]})]})})}},45394:function(e,t,a){"use strict";a.d(t,{C:function(){return s},T:function(){return r}});var n=a(68575);let r=n.I0,s=n.v9},7299:function(e,t,a){"use strict";a.d(t,{aL:function(){return d},jB:function(){return f},kN:function(){return u},r7:function(){return h},sv:function(){return l}});var n=a(1455),r=a(83464),s=a(43577),i=a(64131);let o="".concat("https://stagingsrv.gazala.net/api","/edit-website/news"),d=(0,n.hg)("news/fetchNews",async()=>{try{return(await r.default.get(o,{headers:{Authorization:"Bearer ".concat(i.Z.get("auth_token"))}})).data.data}catch(t){if(console.error("Fetch news error:",t),t instanceof s.d7){var e;return(null==t?void 0:null===(e=t.response)||void 0===e?void 0:e.data)||"An unexpected error occurred."}}}),l=(0,n.hg)("news/fetchNewsById",async(e,t)=>{let{rejectWithValue:a}=t;try{let t=await r.default.get("".concat(o,"/").concat(e),{headers:{Authorization:"Bearer ".concat(i.Z.get("auth_token"))}});if(200!==t.status)return a(t.data.message||"Failed to fetch news item.");return t.data}catch(e){if(e instanceof s.d7){var n;return a((null==e?void 0:null===(n=e.response)||void 0===n?void 0:n.data)||"An unexpected error occurred.")}}}),c=(0,n.hg)("news/fetchNewsBySlug",async(e,t)=>{let{rejectWithValue:a}=t;try{let t=await r.default.get("".concat(o,"/").concat(e),{headers:{Authorization:"Bearer ".concat(i.Z.get("auth_token"))}});if(200!==t.status)return a(t.data.message||"Failed to fetch news item.");return t.data}catch(e){if(e instanceof s.d7){var n;return a((null==e?void 0:null===(n=e.response)||void 0===n?void 0:n.data)||"An unexpected error occurred.")}}}),u=(0,n.hg)("news/deleteNews",async(e,t)=>{let{dispatch:a,rejectWithValue:n}=t;try{let t=await r.default.delete("".concat(o,"/").concat(e),{headers:{Authorization:"Bearer ".concat(i.Z.get("auth_token"))}});if(200!==t.status){let e=t.data;return n(e.message||"Failed to delete news item.")}return a(m(e)),e}catch(e){if(e instanceof s.d7){var d;return n((null===(d=e.response)||void 0===d?void 0:d.data)||"An unexpected error occurred.")}}}),f=(0,n.hg)("news/updateNews",async(e,t)=>{let{updatedNews:a,id:n}=e,{dispatch:d,rejectWithValue:l}=t;try{let e=await r.default.patch("".concat(o,"/").concat(n),a,{headers:{Authorization:"Bearer ".concat(i.Z.get("auth_token"))}});if(200!==e.status){let t=e.data;return l(t.message||"Failed to update news item.")}let t=e.data;return d(p(t)),t}catch(e){if(e instanceof s.d7){var c;return l((null===(c=e.response)||void 0===c?void 0:c.data)||"An unexpected error occurred.")}}}),g=(0,n.oM)({name:"news",initialState:{newsData:[],activeTab:"1",currentNews:null,loading:!1,error:null},reducers:{setActiveTab:(e,t)=>{e.activeTab=t.payload},removeNews:(e,t)=>{e.newsData=e.newsData.filter(e=>e._id!==t.payload)},setCurrentNews:(e,t)=>{e.currentNews=t.payload},clearCurrentNews:e=>{e.currentNews=null}},extraReducers:e=>{e.addCase(d.pending,e=>{e.loading=!0,e.error=null}).addCase(d.fulfilled,(e,t)=>{e.loading=!1,e.newsData=t.payload}).addCase(d.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to load news data."}).addCase(l.pending,e=>{e.loading=!0,e.error=null}).addCase(l.fulfilled,(e,t)=>{e.loading=!1,e.currentNews=t.payload.data}).addCase(l.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Unknown error"}).addCase(f.pending,e=>{e.loading=!0,e.error=null}).addCase(f.fulfilled,(e,t)=>{e.loading=!1;let a=e.newsData.findIndex(e=>e._id===t.payload._id);-1!==a&&(e.newsData[a]=t.payload),e.currentNews=t.payload}).addCase(f.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to update news item."}).addCase(c.pending,e=>{e.loading=!0,e.error=null}).addCase(c.fulfilled,(e,t)=>{e.loading=!1,e.currentNews=t.payload}).addCase(c.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Unknown error"})}}),{setActiveTab:h,removeNews:m,setCurrentNews:p,clearCurrentNews:w}=g.actions;t.ZP=g.reducer},35292:function(e,t,a){"use strict";a.d(t,{x:function(){return n}});let n=e=>"string"==typeof e&&e?e.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()):""},88302:function(e,t,a){"use strict";a.d(t,{j:function(){return n}});let n=e=>e?e.replace(/<[^>]*>?/gm,""):""},43577:function(e,t,a){"use strict";a.d(t,{d7:function(){return r}});let{Axios:n,AxiosError:r,CanceledError:s,isCancel:i,CancelToken:o,VERSION:d,all:l,Cancel:c,isAxiosError:u,spread:f,toFormData:g,AxiosHeaders:h,HttpStatusCode:m,formToJSON:p,getAdapter:w,mergeConfig:v}=a(83464).default}},function(e){e.O(0,[2292,2586,3464,7648,5878,2971,2117,1744],function(){return e(e.s=21557)}),_N_E=e.O()}]);