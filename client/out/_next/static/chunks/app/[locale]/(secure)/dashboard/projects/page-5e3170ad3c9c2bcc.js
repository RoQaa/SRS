(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9190],{11197:function(e,t,r){Promise.resolve().then(r.bind(r,1882))},45394:function(e,t,r){"use strict";r.d(t,{C:function(){return n},T:function(){return s}});var a=r(68575);let s=a.I0,n=a.v9},50023:function(e,t,r){"use strict";r.d(t,{$B:function(){return g},$L:function(){return u},Bu:function(){return x},C2:function(){return o},bl:function(){return l},r7:function(){return m},th:function(){return p},tr:function(){return i},ty:function(){return j}});var a=r(1455),s=r(83464),n=r(43577),c=r(64131);let o=e=>[...e.project.projectsData].sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),d="".concat("https://stagingsrv.gazala.net/api","/edit-website/projects"),l=(0,a.hg)("projects/fetchProjects",async(e,t)=>{let{rejectWithValue:r}=t;try{return(await s.default.get(d,{headers:{Authorization:"Bearer ".concat(c.Z.get("auth_token"))}})).data.data}catch(e){var a;return r(e instanceof n.d7?null===(a=e.response)||void 0===a?void 0:a.data:"An unexpected error occurred.")}}),i=(0,a.hg)("projects/fetchProjectById",async(e,t)=>{let{rejectWithValue:r}=t;try{return(await s.default.get("".concat(d,"/").concat(e),{headers:{Authorization:"Bearer ".concat(c.Z.get("auth_token"))}})).data.data}catch(e){var a;return r(e instanceof n.d7?null===(a=e.response)||void 0===a?void 0:a.data:"An unexpected error occurred.")}}),u=(0,a.hg)("projects/createProject",async(e,t)=>{let{rejectWithValue:r}=t;try{return(await s.default.post(d,e,{headers:{Authorization:"Bearer ".concat(c.Z.get("auth_token"))}})).data}catch(e){var a;return r(e instanceof n.d7?null==e?void 0:null===(a=e.response)||void 0===a?void 0:a.data:"Error Creating Project.")}}),p=(0,a.hg)("projects/deleteProject",async(e,t)=>{let{dispatch:r,rejectWithValue:a}=t;try{return await s.default.delete("".concat(d,"/").concat(e),{headers:{Authorization:"Bearer ".concat(c.Z.get("auth_token"))}}),r(f(e)),e}catch(e){var o;return a(e instanceof n.d7?null==e?void 0:null===(o=e.response)||void 0===o?void 0:o.data:"An unexpected error occurred.")}}),j=(0,a.hg)("projects/updateProject",async(e,t)=>{let{updatedProject:r,slug:a}=e,{dispatch:o,rejectWithValue:l}=t;try{let e=await s.default.patch("".concat(d,"/").concat(a),r,{headers:{Authorization:"Bearer ".concat(c.Z.get("auth_token"))}});return o(v(e.data.doc)),e.data}catch(e){var i;return l(e instanceof n.d7?null==e?void 0:null===(i=e.response)||void 0===i?void 0:i.data:"An unexpected error occurred.")}}),h=(0,a.oM)({name:"projects",initialState:{projectsData:[],activeTab:"1",currentProject:null,loading:!1,dataLoaded:!1,error:null},reducers:{setActiveTab:(e,t)=>{e.activeTab=t.payload},removeProject:(e,t)=>{e.projectsData=e.projectsData.filter(e=>e._id!==t.payload)},setCurrentProject:(e,t)=>{e.currentProject=t.payload},clearCurrentProject:e=>{e.currentProject=null}},extraReducers:e=>{e.addCase(l.pending,e=>{e.loading=!0,e.error=null}).addCase(l.fulfilled,(e,t)=>{e.loading=!1,e.projectsData=t.payload}).addCase(l.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to load projects data."}).addCase(i.pending,e=>{e.loading=!0,e.dataLoaded=!1,e.error=null}).addCase(i.fulfilled,(e,t)=>{e.loading=!1,e.dataLoaded=!0,e.currentProject=t.payload}).addCase(i.rejected,(e,t)=>{e.loading=!1,e.dataLoaded=!0,e.error=t.error.message||"Unknown error"}).addCase(u.pending,e=>{e.loading=!0,e.error=null}).addCase(u.fulfilled,(e,t)=>{e.loading=!1,e.projectsData.push(t.payload)}).addCase(u.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message}).addCase(j.pending,e=>{e.loading=!0,e.error=null}).addCase(j.fulfilled,(e,t)=>{e.loading=!1;let r=e.projectsData.findIndex(e=>e._id===t.payload._id);-1!==r&&(e.projectsData[r]=t.payload),e.currentProject=t.payload}).addCase(j.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to update project."})}}),x=e=>{var t;let r={pending:0,inProgress:0,completed:0};return(null===(t=e.project)||void 0===t?void 0:t.projectsData)&&e.project.projectsData.forEach(e=>{"pending"===e.status?r.pending+=1:"in progress"===e.status?r.inProgress+=1:"completed"===e.status&&(r.completed+=1)}),r},g=e=>{var t,r;return(null===(r=e.project)||void 0===r?void 0:null===(t=r.projectsData)||void 0===t?void 0:t.length)||0},{setActiveTab:m,removeProject:f,setCurrentProject:v,clearCurrentProject:Z}=h.actions;t.ZP=h.reducer},1882:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return F}});var a=r(57437),s=r(2265),n=r(99914),c=r(50288),o=r(98723),d=r(71008),l=r(45394),i=r(50023),u=r(42586),p=r(27648),j=r(80551),h=r(62383),x=r(97231),g=r(42391),m=r(65051),f=r(5551),v=r(53514),Z=r(12121),y=r(43207);let b=()=>{let{activeTab:e}=(0,l.C)(e=>e.project),t=(0,l.T)(),r=(0,u.useLocale)();return(0,a.jsx)(m.Z,{children:(0,a.jsxs)(c.Z,{children:[(0,a.jsx)(o.Z,{md:"6",className:"p-0 d-flex",children:(0,a.jsxs)(f.Z,{tabs:!0,className:"border-tab",id:"top-tab",children:[(0,a.jsx)(v.Z,{children:(0,a.jsxs)(Z.Z,{href:d.zOc,className:"1"===e?"active":"",onClick:()=>t((0,i.r7)("1")),children:[(0,a.jsx)(j.Z,{}),d.oT6]})}),(0,a.jsx)(v.Z,{children:(0,a.jsxs)(Z.Z,{href:d.zOc,className:"2"===e?"active":"",onClick:()=>t((0,i.r7)("2")),children:[(0,a.jsx)(h.Z,{}),"Pending"]})}),(0,a.jsx)(v.Z,{children:(0,a.jsxs)(Z.Z,{href:d.zOc,className:"3"===e?"active":"",onClick:()=>t((0,i.r7)("3")),children:[(0,a.jsx)(h.Z,{}),"In Progress"]})}),(0,a.jsx)(v.Z,{children:(0,a.jsxs)(Z.Z,{href:d.zOc,className:"4"===e?"active":"",onClick:()=>t((0,i.r7)("4")),children:[(0,a.jsx)(x.Z,{}),"Completed"]})})]})}),(0,a.jsxs)(o.Z,{md:"6",children:[(0,a.jsx)(y.Z,{className:"m-0 me-0"}),(0,a.jsxs)(p.default,{className:"btn btn-primary",href:"".concat("https://stagingsrv.gazala.net","/").concat(r,"/dashboard/projects/add"),prefetch:!0,children:[(0,a.jsx)(g.Z,{}),d.fTR]})]})]})})};var N=r(73215),C=r(67061),P=r(41221),w=r(62302),D=r(32300),k=r(33038),_=r(5515),A=r.n(_),z=r(38181),B=r(51699),T=r(58547),E=r(23929);let L=e=>{let{projectSlug:t,projectId:r}=e,[n,c]=(0,s.useState)(!1),o=(0,l.T)(),d=(0,u.useLocale)(),p=e=>{A().fire({icon:"warning",title:"Are you sure?",text:"Once deleted, this item cannot be recovered!",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Delete"}).then(t=>{t.isConfirmed&&o((0,i.th)(e)).unwrap().then(()=>{A().fire({icon:"success",text:"Item has been deleted!",confirmButtonColor:"#3085d6"})}).catch(e=>{A().fire({icon:"error",title:"Error!",text:e.message||"Failed to delete the item."})})})};return(0,a.jsxs)(z.Z,{className:"icon-dropdown",isOpen:n,toggle:()=>c(e=>!e),style:{position:"absolute",top:"6px",right:"34px"},children:[(0,a.jsx)(B.Z,{caret:!0,color:"transparent",className:"border-0 pe-0",children:(0,a.jsx)("i",{className:"icon-more-alt pe-0"})}),(0,a.jsxs)(T.Z,{end:!0,className:"dropdown-menu-end",children:[(0,a.jsx)(E.Z,{tag:"a",href:"".concat("https://stagingsrv.gazala.net","/").concat(d,"/dashboard/projects/edit?id=").concat(r),children:"Edit"}),(0,a.jsx)(E.Z,{style:{cursor:"pointer"},tag:"a",onClick:()=>p(r),children:"Delete"})]})]})},O=e=>{var t,r,s;let{item:n}=e;return(0,a.jsx)(o.Z,{xxl:"6",lg:"6",md:"12",children:(0,a.jsxs)("div",{className:"project-box ".concat(100===n.projectProgress?"b-light1-success":"b-light1-primary"),children:[(0,a.jsx)(L,{projectSlug:null!==(r=n.slug)&&void 0!==r?r:"",projectId:null!==(s=n._id)&&void 0!==s?s:""}),(0,a.jsx)("div",{style:{position:"absolute",top:"10px",right:"0px"},children:(0,a.jsx)(D.Z,{color:"completed"===n.status?"success":"pending"===n.status?"warning":"primary",children:n.status})}),(0,a.jsx)("h5",{className:"fw-bold",children:n.title}),(0,a.jsxs)("div",{className:"d-flex",children:[(0,a.jsx)("img",{className:"img-100 me-1",src:"".concat("https://stagingsrv.gazala.net/api","/").concat(null===(t=n.images)||void 0===t?void 0:t[0])||0,alt:n.title,style:{borderRadius:"8px"}}),(0,a.jsx)("div",{className:"flex-grow-1 mx-2",children:(0,a.jsxs)(c.Z,{className:"details",children:[(0,a.jsx)(o.Z,{xs:"6",children:(0,a.jsx)("span",{children:"Start Date"})}),(0,a.jsx)(o.Z,{xs:"6",className:"txt-".concat("completed"===n.status?"success":"pending"===n.status?"warning":"primary"),children:new Date(n.startDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})||""}),(0,a.jsx)(o.Z,{xs:"6",children:(0,a.jsx)("span",{children:"End Date"})}),(0,a.jsx)(o.Z,{xs:"6",className:"txt-".concat("completed"===n.status?"success":"pending"===n.status?"warning":"primary"),children:new Date(n.endDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})||""}),(0,a.jsx)(o.Z,{xs:"6",children:(0,a.jsx)("span",{children:"Client"})}),(0,a.jsx)(o.Z,{xs:"6",className:"txt-".concat("completed"===n.status?"success":"pending"===n.status?"warning":"primary"),children:n.client})]})})]}),(0,a.jsx)("p",{children:((null==n?void 0:n.description)||"").slice(0,250)+"..."}),(0,a.jsxs)("div",{className:"project-status mt-4",children:[(0,a.jsxs)("div",{className:"d-flex mb-0",children:[(0,a.jsxs)("p",{children:[n.projectProgress,"%"]}),(0,a.jsx)("div",{className:"flex-grow-1 text-end",children:(0,a.jsx)("span",{children:"Done"})})]}),100===n.projectProgress?(0,a.jsx)(k.Z,{className:"sm-progress-bar",color:"success",value:n.projectProgress||"",style:{height:"5px"}}):(0,a.jsx)(k.Z,{className:"sm-progress-bar",animated:!0,striped:!0,color:"primary",value:n.projectProgress||0,style:{height:"5px"}})]})]})})};var S=()=>{let{activeTab:e,projectsData:t,loading:r}=(0,l.C)(e=>e.project),n=(0,l.T)(),o=Array.isArray(t)&&t.length>0,d={1:()=>!0,2:e=>(null==e?void 0:e.status)==="pending",3:e=>(null==e?void 0:e.status)==="in progress",4:e=>(null==e?void 0:e.status)==="completed"};return(0,s.useEffect)(()=>{n((0,i.bl)())},[n]),(0,a.jsx)(m.Z,{children:(0,a.jsx)(N.Z,{children:(0,a.jsx)(C.Z,{activeTab:e,children:r?(0,a.jsx)("div",{className:"text-center py-5",children:(0,a.jsx)(P.Z,{color:"primary"})}):o?Object.keys(d).map(e=>(0,a.jsx)(w.Z,{tabId:e,children:(0,a.jsx)(c.Z,{children:t.filter(t=>d[e](t)).map((e,t)=>(0,a.jsx)(O,{item:e},e._id||e.name||t))})},e)):(0,a.jsx)("p",{className:"text-center pt-3 pb-5",children:(0,a.jsx)("strong",{children:"No Projects Found"})})})})})},I=()=>(0,a.jsx)(n.Z,{fluid:!0,children:(0,a.jsxs)(c.Z,{className:"project-cards",children:[(0,a.jsx)(o.Z,{md:"12",className:"project-list",children:(0,a.jsx)(b,{})}),(0,a.jsx)(o.Z,{sm:"12",children:(0,a.jsx)(S,{})})]})}),F=()=>(0,a.jsx)(I,{})}},function(e){e.O(0,[9461,2292,2586,3464,7648,3537,6752,897,1339,4292,1008,2971,2117,1744],function(){return e(e.s=11197)}),_N_E=e.O()}]);