(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4787],{8649:function(e,t,n){Promise.resolve().then(n.bind(n,64567))},95029:function(e,t,n){"use strict";var r=n(2265),a=n(40718),o=n.n(a),i=n(36760),l=n.n(i),s=n(28137);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=["className","cssModule","type","bsSize","valid","invalid","tag","addon","plaintext","innerRef"];function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m={children:o().node,type:o().string,size:o().oneOfType([o().number,o().string]),bsSize:o().string,valid:o().bool,invalid:o().bool,tag:s.iC,innerRef:o().oneOfType([o().object,o().func,o().string]),plaintext:o().bool,addon:o().bool,className:o().string,cssModule:o().object},g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(o,e);var t,n,a=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=h(o);return e=t?Reflect.construct(n,arguments,h(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return p(e)}(this,e)});function o(e){var t;return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).getRef=t.getRef.bind(p(t)),t.focus=t.focus.bind(p(t)),t}return n=[{key:"getRef",value:function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e}},{key:"focus",value:function(){this.ref&&this.ref.focus()}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.cssModule,a=e.type,o=void 0===a?"text":a,i=e.bsSize,c=e.valid,f=e.invalid,p=e.tag,h=e.addon,m=e.plaintext,g=e.innerRef,v=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,u),y=["switch","radio","checkbox"].indexOf(o)>-1,b="textarea"===o,x="select"===o,j="range"===o,w=p||(x||b?o:"input"),O="form-control";m?(O="".concat(O,"-plaintext"),w=p||"input"):j?O="form-range":x?O="form-select":y&&(O=h?null:"form-check-input"),v.size&&/\D/g.test(v.size)&&((0,s.O4)('Please use the prop "bsSize" instead of the "size" to bootstrap\'s input sizing.'),i=v.size,delete v.size);var C=(0,s.mx)(l()(t,f&&"is-invalid",c&&"is-valid",!!i&&(x?"form-select-".concat(i):"form-control-".concat(i)),O),n);return("input"===w||p&&"function"==typeof p)&&(v.type="switch"===o?"checkbox":o),v.children&&!(m||"select"===o||"string"!=typeof w||"select"===w)&&((0,s.O4)('Input with a type of "'.concat(o,'" cannot have children. Please use "value"/"defaultValue" instead.')),delete v.children),r.createElement(w,d({},v,{ref:g,className:C,"aria-invalid":f}))}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);g.propTypes=m,t.Z=g},41221:function(e,t,n){"use strict";var r=n(2265),a=n(40718),o=n.n(a),i=n(36760),l=n.n(i),s=n(28137),c=["className","cssModule","type","size","color","children","tag"];function u(){return(u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var d={tag:s.iC,type:o().oneOf(["border","grow"]),size:o().oneOf(["sm"]),color:o().oneOf(["primary","secondary","success","danger","warning","info","light","dark"]),className:o().string,cssModule:o().object,children:o().string};function f(e){var t=e.className,n=e.cssModule,a=e.type,o=void 0===a?"border":a,i=e.size,d=e.color,f=e.children,p=void 0===f?"Loading...":f,h=e.tag,m=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,c),g=(0,s.mx)(l()(t,!!i&&"spinner-".concat(o,"-").concat(i),"spinner-".concat(o),!!d&&"text-".concat(d)),n);return r.createElement(void 0===h?"div":h,u({role:"status"},m,{className:g}),p&&r.createElement("span",{className:(0,s.mx)("visually-hidden",n)},p))}f.propTypes=d,t.Z=f},79205:function(e,t,n){"use strict";var r=n(57437);n(2265),t.Z=e=>{let{iconId:t,className:n,style:a}=e;return(0,r.jsx)("svg",{className:n,style:a,children:(0,r.jsx)("use",{href:"/assets/svg/icon-sprite.svg#".concat(t)})})}},64567:function(e,t,n){"use strict";n.d(t,{default:function(){return F}});var r=n(57437),a=n(41221),o=n(65051),i=n(2265),l=n(45394),s=n(80498),c=n(77314),u=n(43207),d=n(82097),f=n(50288),p=n(98723),h=n(95029),m=n(80201),g=n(18206);let v=e=>{let{loading:t}=e;return(0,r.jsx)(f.Z,{children:(0,r.jsx)(p.Z,{children:(0,r.jsx)("div",{className:"text-end",children:(0,r.jsx)(m.Z,{type:"submit",color:t?"secondary":"primary",className:"me-3",disabled:t,children:t?(0,r.jsxs)(r.Fragment,{children:["Saving... ",(0,r.jsx)(a.Z,{size:"sm"})]}):"Save"})})})})};var y=n(34422),b=n(94926),x=n(79205),j=n(27648),w=n(71008),O=n(180),C=n(48055);let N=["image/jpeg","image/png","image/gif","image/webp"];var Z=e=>{let{setFieldValue:t,oldThumbnail:n}=e,[a,o]=(0,i.useState)([]),[l,s]=(0,i.useState)(null),u=e=>{if(e.file){if(!N.includes(e.file.type))return g.Am.error("Invalid file type. Allowed types are PNG, JPEG, GIF, and WebP."),!1;if(e.file.size>5242880)return g.Am.error("File size exceeds 2 MB limit."),!1}return!0},d=e=>{e.file instanceof File?(s(e),t("image",e.file)):console.error("Invalid file provided for Image.")};return(0,i.useEffect)(()=>{(async()=>{if(n)try{let e=(0,C.w)(n),t=await (0,O.f)(n,e);if(t instanceof File){let e={id:t.name,file:t,name:t.name,size:t.size,type:t.type,preview:!0};s(e)}else console.error("Image is not a valid file.")}catch(e){console.error("Failed to load Image:",e)}})()},[n]),(0,r.jsx)("div",{className:"sidebar-body mt-4",children:(0,r.jsxs)("div",{className:"product-upload",children:[(0,r.jsxs)("p",{children:["Counter Image",(0,r.jsx)("span",{className:"txt-danger",children:" *"})]}),(0,r.jsxs)(b.fh,{onChange:e=>{let t=e.filter(u);t.length>0&&d(t[0])},value:l?[l]:[],maxFiles:1,header:!1,footer:!1,minHeight:"80px",name:"image",children:[l&&(0,r.jsx)(b.Q$,{...l,onDelete:()=>{s(null),t("image",null)},info:!0,preview:!0},l.id),0===a.length&&!l&&(0,r.jsxs)("div",{className:"dz-message needsclick",children:[(0,r.jsx)(x.Z,{iconId:"file-upload"}),(0,r.jsxs)("h5",{children:["Drag your image here, or",(0,r.jsx)(j.default,{className:"txt-primary",href:w.zOc,children:"\xa0browse"})]}),(0,r.jsx)("span",{className:"note needsclick",children:"SVG, PNG, JPG or GIF"})]})]}),(0,r.jsx)(c.Bc,{name:"image",component:"span",className:"text-danger"}),(0,r.jsx)("br",{})]})})},_=e=>{var t,n;let{counters:a}=e,[o,y]=(0,i.useState)(!1),b=(0,l.T)(),x={image:"".concat(null===(t=a[0])||void 0===t?void 0:t.image)||"",counters:(null===(n=a[0])||void 0===n?void 0:n.counters)||{}},j=async e=>{y(!0);let t=new FormData;Object.keys(e).forEach(n=>{"counters"===n?e.counters.forEach((e,n)=>{t.append("counters[".concat(n,"][label]"),e.label),t.append("counters[".concat(n,"][label_ar]"),e.label_ar),t.append("counters[".concat(n,"][value]"),e.value.toString())}):t.append(n,e[n])});try{let e=await b((0,s.gH)()).unwrap();if(e&&0!==e.length){let n=e[0]._id;await b((0,s.OY)({formData:t,id:n})).unwrap(),g.Am.success("Counter updated successfully!"),await b((0,s.gH)()).unwrap()}else await b((0,s.ix)(t)).unwrap(),g.Am.success("Counter created successfully!"),await b((0,s.gH)()).unwrap()}catch(e){g.Am.error(e.message||"An error occurred while handling the counter."),console.error("Error handling counter data:",e.message)}y(!1)};return(0,r.jsx)(c.J9,{initialValues:x,validationSchema:z,onSubmit:j,children:e=>{var t;let{setFieldValue:n,values:i}=e;return(0,r.jsxs)(c.l0,{className:"theme-form",children:[(0,r.jsx)(Z,{setFieldValue:n,oldThumbnail:"".concat("https://stagingsrv.gazala.net/api","/").concat(null===(t=a[0])||void 0===t?void 0:t.image)||0}),(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(d.Z,{for:"counter",children:"Counters"}),(0,r.jsx)(c.F2,{name:"counters",render:e=>(0,r.jsxs)(r.Fragment,{children:[Array.isArray(i.counters)&&i.counters.length>0?i.counters.map((t,n)=>(0,r.jsxs)("div",{children:[(0,r.jsxs)(f.Z,{children:[(0,r.jsxs)(p.Z,{md:4,children:[(0,r.jsx)(d.Z,{children:"Label"}),(0,r.jsx)(c.gN,{name:"counters[".concat(n,"][label]"),children:e=>{let{field:t}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)(h.Z,{...t,placeholder:"Enter Label"}),(0,r.jsx)(c.Bc,{name:"counters[".concat(n,"][label]"),component:"div",className:"text-danger",children:e=>(0,r.jsx)("div",{className:"text-danger",children:e})})]})}})]}),(0,r.jsxs)(p.Z,{md:4,children:[(0,r.jsx)(d.Z,{children:"Label (Ar)"}),(0,r.jsx)(c.gN,{name:"counters[".concat(n,"][label_ar]"),children:e=>{let{field:t}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)(h.Z,{...t,placeholder:"Enter Label In Arabic"}),(0,r.jsx)(c.Bc,{name:"counters[".concat(n,"][label_ar]"),component:"div",className:"text-danger",children:e=>(0,r.jsx)("div",{className:"text-danger",children:e})})]})}})]}),(0,r.jsxs)(p.Z,{md:4,children:[(0,r.jsx)(d.Z,{children:"Count"}),(0,r.jsx)(c.gN,{name:"counters[".concat(n,"][value]"),children:e=>{let{field:t}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)(h.Z,{...t,placeholder:"Enter Count",type:"number"}),(0,r.jsx)(c.Bc,{name:"counters[".concat(n,"][value]"),component:"div",className:"text-danger",children:e=>(0,r.jsx)("div",{className:"text-danger",children:e})})]})}})]})]}),(0,r.jsx)(m.Z,{className:"mt-2 mb-3",type:"button",color:"danger",onClick:()=>e.remove(n),children:"Remove Counter"})]},n)):(0,r.jsx)("div",{children:"No Counters available"}),(0,r.jsx)(m.Z,{type:"button",color:"primary",onClick:()=>e.push({label:"",value:""}),className:"mt-3 px-4 py-2 btn ms-2",children:"Add Counter"})]})})]}),(0,r.jsx)(v,{loading:o})]})}})};let z=y.Ry({image:y.nK().required("Image URL is required"),counters:y.IX().of(y.Ry({label:y.Z_().required("Counter label is required").min(1,"Counter label must be at least 1 character long"),label_ar:y.Z_().required("Counter label ar is required").min(1,"Counter label must be at least 1 character long"),value:y.Rx().required("Counter value is required").min(1,"Counter value must be greater than 0")})).min(1,"Counter Must Contain At Least 1 Item")}),R=()=>{let e=(0,l.T)(),t=(0,l.C)(e=>e.counter.counters),n=(0,l.C)(e=>e.counter.loading),r=(0,l.C)(e=>e.counter.error);return(0,i.useEffect)(()=>{e((0,s.gH)())},[e]),{counters:t,loading:n,error:r,dispatch:e}};var F=()=>{let{counters:e,loading:t}=R();return(0,r.jsx)(r.Fragment,{children:t?(0,r.jsx)("div",{className:"text-center py-5",children:(0,r.jsx)(a.Z,{color:"primary"})}):(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-weight-bold text-xl mb-8 text-center my-4",children:"Counter Section"}),(0,r.jsx)(o.Z,{body:!0,children:(0,r.jsx)(_,{counters:null!=e?e:[]})})]})})}},45394:function(e,t,n){"use strict";n.d(t,{C:function(){return o},T:function(){return a}});var r=n(68575);let a=r.I0,o=r.v9},80498:function(e,t,n){"use strict";n.d(t,{OY:function(){return u},gH:function(){return s},ix:function(){return c}});var r=n(1455),a=n(83464),o=n(43577),i=n(64131);let l="".concat("https://stagingsrv.gazala.net/api","/edit-website/counter"),s=(0,r.hg)("counter/fetchCounterData",async(e,t)=>{let{rejectWithValue:n}=t;try{return(await a.default.get(l,{headers:{Authorization:"Bearer "+i.Z.get("auth_token")}})).data.data}catch(e){if(e instanceof o.d7){var r,s;if((null===(r=e.response)||void 0===r?void 0:r.status)===404)return[];return n((null==e?void 0:null===(s=e.response)||void 0===s?void 0:s.data)||"Failed to fetch counter data")}}}),c=(0,r.hg)("counter/addCounterData",async(e,t)=>{let{rejectWithValue:n}=t;try{return(await a.default.post(l,e,{headers:{Authorization:"Bearer "+i.Z.get("auth_token")}})).data}catch(e){if(e instanceof o.d7){var r;return n((null==e?void 0:null===(r=e.response)||void 0===r?void 0:r.data)||"Failed to add counter data")}}}),u=(0,r.hg)("counter/updateCounterData",async(e,t)=>{let{formData:n,id:r}=e,{rejectWithValue:s}=t;try{return(await a.default.patch("".concat(l,"/").concat(r),n,{headers:{Authorization:"Bearer "+i.Z.get("auth_token")}})).data}catch(e){if(e instanceof o.d7){var c;return s((null==e?void 0:null===(c=e.response)||void 0===c?void 0:c.data)||"Failed to update counter data")}}}),d=(0,r.oM)({name:"counter",initialState:{counters:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(s.pending,e=>{e.loading=!0,e.error=null}).addCase(s.fulfilled,(e,t)=>{e.loading=!1,e.counters=t.payload}).addCase(s.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"Failed to fetch counter data"}).addCase(c.pending,e=>{e.loading=!0,e.error=null}).addCase(c.fulfilled,(e,t)=>{e.loading=!1,e.counters.push(t.payload)}).addCase(c.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"Failed to add counter data"}).addCase(u.pending,e=>{e.loading=!0,e.error=null}).addCase(u.fulfilled,(e,t)=>{e.loading=!1;let n=t.payload;e.counters=e.counters.map(e=>e._id===n._id?n:e)}).addCase(u.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"Failed to update counter data"})}});t.ZP=d.reducer},180:function(e,t,n){"use strict";n.d(t,{f:function(){return r}});let r=async(e,t)=>{if(e instanceof File)return e;if(!e||"string"!=typeof e)throw Error("Invalid URL provided: "+e);try{let n=await fetch(e);if(!n.ok){if(404===n.status)return console.warn("File not found at URL: ".concat(e)),new File([],t);throw Error("Failed to fetch image from URL: ".concat(e))}let r=await n.blob();return new File([r],t,{type:r.type})}catch(e){return console.error("Error converting URL to file:",e),new File([],t)}}},48055:function(e,t,n){"use strict";n.d(t,{w:function(){return r}});let r=e=>{try{return new URL(e).pathname.split("/").pop()||"default_filename.png"}catch(t){return console.error("Invalid URL provided:",e),"default_filename.png"}}},43577:function(e,t,n){"use strict";n.d(t,{d7:function(){return a}});let{Axios:r,AxiosError:a,CanceledError:o,isCancel:i,CancelToken:l,VERSION:s,all:c,Cancel:u,isAxiosError:d,spread:f,toFormData:p,AxiosHeaders:h,HttpStatusCode:m,formToJSON:g,getAdapter:v,mergeConfig:y}=n(83464).default}},function(e){e.O(0,[2292,3464,7648,3537,8206,6474,4520,1008,2971,2117,1744],function(){return e(e.s=8649)}),_N_E=e.O()}]);