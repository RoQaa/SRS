(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1770],{15030:function(e,r,a){Promise.resolve().then(a.bind(a,28314))},73215:function(e,r,a){"use strict";var t=a(2265),n=a(40718),s=a.n(n),c=a(36760),l=a.n(c),o=a(28137),i=["className","cssModule","innerRef","tag"];function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e}).apply(this,arguments)}var u={className:s().string,cssModule:s().object,innerRef:s().oneOfType([s().object,s().string,s().func]),tag:o.iC};function p(e){var r=e.className,a=e.cssModule,n=e.innerRef,s=e.tag,c=function(e,r){if(null==e)return{};var a,t,n=function(e,r){if(null==e)return{};var a,t,n={},s=Object.keys(e);for(t=0;t<s.length;t++)a=s[t],r.indexOf(a)>=0||(n[a]=e[a]);return n}(e,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)a=s[t],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,i),u=(0,o.mx)(l()(r,"card-body"),a);return t.createElement(void 0===s?"div":s,d({},c,{className:u,ref:n}))}p.propTypes=u,r.Z=p},99914:function(e,r,a){"use strict";var t=a(2265),n=a(40718),s=a.n(n),c=a(36760),l=a.n(c),o=a(28137),i=["className","cssModule","fluid","tag"];function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e}).apply(this,arguments)}var u={tag:o.iC,fluid:s().oneOfType([s().bool,s().string]),className:s().string,cssModule:s().object};function p(e){var r=e.className,a=e.cssModule,n=e.fluid,s=e.tag,c=function(e,r){if(null==e)return{};var a,t,n=function(e,r){if(null==e)return{};var a,t,n={},s=Object.keys(e);for(t=0;t<s.length;t++)a=s[t],r.indexOf(a)>=0||(n[a]=e[a]);return n}(e,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)a=s[t],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,i),u="container";!0===n?u="container-fluid":n&&(u="container-".concat(n));var p=(0,o.mx)(l()(r,u),a);return t.createElement(void 0===s?"div":s,d({},c,{className:p}))}p.propTypes=u,r.Z=p},41221:function(e,r,a){"use strict";var t=a(2265),n=a(40718),s=a.n(n),c=a(36760),l=a.n(c),o=a(28137),i=["className","cssModule","type","size","color","children","tag"];function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e}).apply(this,arguments)}var u={tag:o.iC,type:s().oneOf(["border","grow"]),size:s().oneOf(["sm"]),color:s().oneOf(["primary","secondary","success","danger","warning","info","light","dark"]),className:s().string,cssModule:s().object,children:s().string};function p(e){var r=e.className,a=e.cssModule,n=e.type,s=void 0===n?"border":n,c=e.size,u=e.color,p=e.children,m=void 0===p?"Loading...":p,h=e.tag,f=function(e,r){if(null==e)return{};var a,t,n=function(e,r){if(null==e)return{};var a,t,n={},s=Object.keys(e);for(t=0;t<s.length;t++)a=s[t],r.indexOf(a)>=0||(n[a]=e[a]);return n}(e,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)a=s[t],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,i),g=(0,o.mx)(l()(r,!!c&&"spinner-".concat(s,"-").concat(c),"spinner-".concat(s),!!u&&"text-".concat(u)),a);return t.createElement(void 0===h?"div":h,d({role:"status"},f,{className:g}),m&&t.createElement("span",{className:(0,o.mx)("visually-hidden",a)},m))}p.propTypes=u,r.Z=p},79205:function(e,r,a){"use strict";var t=a(57437);a(2265),r.Z=e=>{let{iconId:r,className:a,style:n}=e;return(0,t.jsx)("svg",{className:a,style:n,children:(0,t.jsx)("use",{href:"/assets/svg/icon-sprite.svg#".concat(r)})})}},28314:function(e,r,a){"use strict";a.d(r,{default:function(){return E}});var t=a(57437),n=a(2265),s=a(99914),c=a(50288),l=a(98723),o=a(65051),i=a(73215),d=a(77314),u=a(99376),p=a(43207),m=a(82097);let h=e=>{let{lang:r="en"}=e;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(c.Z,{children:(0,t.jsx)(l.Z,{children:(0,t.jsxs)(p.Z,{children:[(0,t.jsx)(m.Z,{check:!0,children:"en"===r?"Name":"Name (Arabic)"}),(0,t.jsx)(d.gN,{name:"en"===r?"name":"name_ar",type:"text",className:"form-control",placeholder:"Product Name"}),"en"===r?(0,t.jsx)(d.Bc,{name:"name",component:"span",className:"text-danger"}):(0,t.jsx)(d.Bc,{name:"name_ar",component:"span",className:"text-danger"})]})})})})};var f=a(45394),g=a(50984),x=a(41221);let j=()=>{let e=(0,f.T)(),{productsData:r,loading:a}=(0,f.C)(e=>e.products);return(0,n.useEffect)(()=>{(async()=>{await e((0,g.t2)())})()},[e]),(0,t.jsx)(t.Fragment,{children:a?(0,t.jsx)("div",{children:(0,t.jsx)(x.Z,{})}):(0,t.jsxs)(c.Z,{children:[(0,t.jsx)(l.Z,{sm:"6",children:(0,t.jsxs)(p.Z,{children:[(0,t.jsx)(m.Z,{check:!0,children:"Category"}),(0,t.jsxs)(d.gN,{as:"select",name:"parentProductId",className:"form-control form-select",children:[(0,t.jsx)("option",{value:"null",children:"Select Category"}),r.length>0&&r.map(e=>{var r;return(0,t.jsx)("option",{value:e._id,children:null===(r=e.name)||void 0===r?void 0:r.toUpperCase()},e._id)})]}),(0,t.jsx)(d.Bc,{name:"parentProductId",component:"span",className:"text-danger"})]})}),(0,t.jsx)(l.Z,{sm:"6",children:(0,t.jsxs)(p.Z,{children:[(0,t.jsx)(m.Z,{children:"Publish"}),(0,t.jsxs)(d.gN,{name:"published",as:"select",className:"form-control form-select",children:[(0,t.jsx)("option",{value:"true",children:"Publish"}),(0,t.jsx)("option",{value:"false",children:"Un Publish"})]})]})})]})})};var v=a(71008);let y=e=>{let{lang:r="en"}=e;return(0,t.jsx)(c.Z,{children:(0,t.jsx)(l.Z,{children:(0,t.jsxs)(p.Z,{children:[(0,t.jsx)(m.Z,{check:!0,children:"en"===r?v.mz3:v.mz3+" (Arabic)"}),(0,t.jsx)(d.gN,{name:"en"===r?"description":"description_ar",as:"textarea",className:"form-control",rows:3}),(0,t.jsx)(d.Bc,{name:"en"===r?"description":"description_ar",component:"span",className:"text-danger"})]})})})};var b=a(42586),N=a(27648),O=a(80201);let P=()=>{let e=(0,b.useLocale)();return(0,t.jsx)(c.Z,{children:(0,t.jsx)(l.Z,{children:(0,t.jsxs)("div",{className:"text-end",children:[(0,t.jsx)(O.Z,{type:"submit",color:"success",className:"me-3",children:v.mm_}),(0,t.jsx)(N.default,{className:"btn btn-danger",href:"".concat("https://stagingsrv.gazala.net","/").concat(e,"/dashboard/products"),children:v.$jj})]})})})};var Z=a(94926),_=a(79205),w=e=>{let{setFieldValue:r}=e,[a,s]=(0,n.useState)([]),c=e=>{s(e),r("images",e.filter(e=>e.valid).map(e=>e.file))},l=e=>{let t=a.filter(r=>r.id!==e);s(t),r("images",t.map(e=>e.file))};return(0,t.jsxs)("div",{className:"product-upload mt-2",children:[(0,t.jsxs)("p",{children:["Product Gallery",(0,t.jsx)("span",{className:"txt-danger",children:" *"})]}),(0,t.jsxs)(Z.fh,{onChange:e=>c(e),value:a,maxFiles:5,header:!1,footer:!1,minHeight:"80px",name:"images",children:[a.map(e=>(0,t.jsx)(Z.Q$,{...e,onDelete:()=>l(e.id),info:!0,preview:!0},e.id)),0===a.length&&(0,t.jsxs)("div",{className:"dz-message needsclick",children:[(0,t.jsx)(_.Z,{iconId:"file-upload1"}),(0,t.jsx)("h5",{children:"Drag Images here"}),(0,t.jsx)("span",{className:"note needsclick",children:"Add Product Gallery Images"})]})]}),(0,t.jsx)(d.Bc,{name:"images",component:"span",className:"text-danger"})]})},C=e=>{let{setFieldValue:r}=e,[a,s]=(0,n.useState)([]),[c,l]=(0,n.useState)(null),o=e=>{l(e),r("thumbnail",e.file)};return(0,t.jsx)("div",{className:"sidebar-body mt-4",children:(0,t.jsxs)("div",{className:"product-upload",children:[(0,t.jsxs)("p",{children:["Product Thumbnail",(0,t.jsx)("span",{className:"txt-danger",children:" *"})]}),(0,t.jsxs)(Z.fh,{onChange:e=>{e.length>0&&o(e[0])},value:c?[c]:[],maxFiles:1,header:!1,footer:!1,minHeight:"80px",name:"thumbnail",children:[c&&(0,t.jsx)(Z.Q$,{...c,onDelete:()=>{l(null),r("thumbnail",null)},info:!0,preview:!0},c.id),0===a.length&&!c&&(0,t.jsxs)("div",{className:"dz-message needsclick",children:[(0,t.jsx)(_.Z,{iconId:"file-upload"}),(0,t.jsxs)("h5",{children:["Drag your image here, or",(0,t.jsx)(N.default,{className:"txt-primary",href:v.zOc,children:"\xa0browse"})]}),(0,t.jsx)("span",{className:"note needsclick",children:"SVG, PNG, JPG or GIF"})]})]}),(0,t.jsx)(d.Bc,{name:"thumbnail",component:"span",className:"text-danger"}),(0,t.jsx)("br",{}),(0,t.jsx)(w,{setFieldValue:r})]})})},k=a(18206),A=a(34422),F=()=>{let e=(0,u.useRouter)(),r=(0,f.T)(),a=(0,b.useLocale)(),n=async t=>{let n=new FormData,s={...t};Object.keys(s).forEach(e=>{"thumbnail"!==e&&"images"!==e&&void 0!==s[e]&&null!==s[e]&&n.append(e,String(s[e]))}),Array.isArray(s.images)&&s.images.forEach(e=>{n.append("images",e)}),s.thumbnail&&n.append("thumbnail",s.thumbnail);try{await r((0,g.ry)(n)).unwrap(),k.Am.success("Product Created successfully!"),e.push("/".concat(a,"/dashboard/products/"))}catch(e){k.Am.error((null==e?void 0:e.message)||"Error Creating Product."),console.error("Error Creating Product:",e)}};return(0,t.jsx)(d.J9,{initialValues:{name:"",name_ar:"",description:"",description_ar:"",parentProductId:null,thumbnail:"",images:[],published:!1},validationSchema:I,onSubmit:n,children:e=>{let{setFieldValue:r}=e;return(0,t.jsxs)(d.l0,{className:"theme-form",children:[(0,t.jsx)(h,{lang:"en"}),(0,t.jsx)(y,{lang:"en"}),(0,t.jsx)(j,{}),(0,t.jsx)(C,{setFieldValue:r}),(0,t.jsxs)("h3",{className:"py-2 my-3",children:[(0,t.jsx)("span",{className:"text-danger",children:"*"}),"Add Details In Arabic"]}),(0,t.jsx)(h,{lang:"ar"}),(0,t.jsx)(y,{lang:"ar"}),(0,t.jsx)(P,{})]})}})};let I=A.Ry().shape({name:A.Z_().required("Name is required"),name_ar:A.Z_().required("Arabic name is required"),description:A.Z_().required("Description is required"),description_ar:A.Z_().required("Arabic description is required"),parentProductId:A.Z_().nullable().optional(),published:A.O7().required("Published status is required")});var E=()=>(0,t.jsx)(s.Z,{fluid:!0,children:(0,t.jsx)(c.Z,{children:(0,t.jsx)(l.Z,{sm:"12",children:(0,t.jsx)(o.Z,{children:(0,t.jsx)(i.Z,{children:(0,t.jsx)(F,{})})})})})})},45394:function(e,r,a){"use strict";a.d(r,{C:function(){return s},T:function(){return n}});var t=a(68575);let n=t.I0,s=t.v9},50984:function(e,r,a){"use strict";a.d(r,{Ir:function(){return p},dQ:function(){return i},nM:function(){return u},r7:function(){return v},ry:function(){return d},t2:function(){return o}});var t=a(1455),n=a(83464),s=a(43577),c=a(64131);let l="".concat("https://stagingsrv.gazala.net/api","/edit-website/products"),o=(0,t.hg)("products/fetchProducts",async(e,r)=>{let{rejectWithValue:a}=r;try{let e=await n.default.get(l,{headers:{Authorization:"Bearer ".concat(c.Z.get("auth_token"))}});if(200!==e.status)throw Error("Failed to fetch products. Status: ".concat(e.status));return e.data.data}catch(e){if(e instanceof s.d7){var t;return a((null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.data)||"Failed to fetch products")}}}),i=(0,t.hg)("products/fetchProductBySlug",async(e,r)=>{let{rejectWithValue:a}=r;try{let r=await n.default.get("".concat(l,"/").concat(e),{headers:{Authorization:"Bearer ".concat(c.Z.get("auth_token"))}});if(200!==r.status)return a(r.data.message||"Failed to fetch product.");return r.data.data}catch(e){if(e instanceof s.d7){var t;return a((null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.data)||"An unexpected error occurred.")}}}),d=(0,t.hg)("products/createProduct",async(e,r)=>{let{dispatch:a,rejectWithValue:t}=r;try{let r=await n.default.post(l,e,{headers:{Authorization:"Bearer ".concat(c.Z.get("auth_token"))}});if(201!==r.status)return t(r.data.message||"Failed to create product.");let s=r.data;return a(x(s)),s}catch(e){if(e instanceof s.d7){var o;return t((null==e?void 0:null===(o=e.response)||void 0===o?void 0:o.data)||"An unexpected error occurred.")}}}),u=(0,t.hg)("products/updateProduct",async(e,r)=>{let{formData:a,slug:t}=e,{rejectWithValue:o}=r;try{let e=await n.default.patch("".concat(l,"/").concat(t),a,{headers:{Authorization:"Bearer ".concat(c.Z.get("auth_token"))}});if(200!==e.status)return o(e.data.message||"Failed to update product.");return e.data}catch(e){if(e instanceof s.d7){var i;return o((null==e?void 0:null===(i=e.response)||void 0===i?void 0:i.data)||"An unexpected error occurred.")}}}),p=(0,t.hg)("products/deleteProduct",async(e,r)=>{let{dispatch:a,rejectWithValue:t}=r;try{let r=await n.default.delete("".concat(l,"/").concat(e),{headers:{Authorization:"Bearer ".concat(c.Z.get("auth_token"))}});if(200!==r.status)return t(r.data.message||"Failed to delete product.");return a(j(e)),e}catch(e){if(e instanceof s.d7){var o;return t((null==e?void 0:null===(o=e.response)||void 0===o?void 0:o.data)||"An unexpected error occurred.")}}}),m={productsData:[],currentProduct:null,loading:!1,error:null,activeTab:"1",formValues:{name:"",name_ar:"",description:"",description_ar:"",parentProductId:null,thumbnail:"",images:[],published:!1}},h=(0,t.oM)({name:"products",initialState:m,reducers:{setCurrentProduct:(e,r)=>{e.currentProduct=r.payload},clearCurrentProduct:e=>{e.currentProduct=null},addProduct:(e,r)=>{e.productsData.push(r.payload)},removeProduct:(e,r)=>{e.productsData=e.productsData.filter(e=>e._id!==r.payload)},setActiveTab:(e,r)=>{e.activeTab=r.payload},setFormValues:(e,r)=>{e.formValues=r.payload},clearFormValues:e=>{e.formValues=m.formValues}},extraReducers:e=>{e.addCase(o.pending,e=>{e.loading=!0,e.error=null}).addCase(o.fulfilled,(e,r)=>{e.loading=!1,e.productsData=r.payload}).addCase(o.rejected,(e,r)=>{e.loading=!1,e.error=r.error.message||"Failed to load products data."}).addCase(i.pending,e=>{e.loading=!0,e.error=null}).addCase(i.fulfilled,(e,r)=>{e.loading=!1,e.currentProduct=r.payload,e.formValues={name:r.payload.name,name_ar:r.payload.name_ar,description:r.payload.description,description_ar:r.payload.description_ar,parentProductId:r.payload.parentProductId,thumbnail:r.payload.thumbnail,images:r.payload.images,published:r.payload.published}}).addCase(i.rejected,(e,r)=>{e.loading=!1,e.error=r.error.message||"Failed to fetch product."}).addCase(u.pending,e=>{e.loading=!0,e.error=null}).addCase(u.fulfilled,(e,r)=>{e.loading=!1;let a=e.productsData.findIndex(e=>e._id===r.payload._id);-1!==a&&(e.productsData[a]=r.payload),e.currentProduct=r.payload}).addCase(u.rejected,(e,r)=>{e.loading=!1,e.error=r.error.message||"Failed to update product."})}}),{setCurrentProduct:f,clearCurrentProduct:g,addProduct:x,removeProduct:j,setActiveTab:v,setFormValues:y,clearFormValues:b}=h.actions;r.ZP=h.reducer},43577:function(e,r,a){"use strict";a.d(r,{d7:function(){return n}});let{Axios:t,AxiosError:n,CanceledError:s,isCancel:c,CancelToken:l,VERSION:o,all:i,Cancel:d,isAxiosError:u,spread:p,toFormData:m,AxiosHeaders:h,HttpStatusCode:f,formToJSON:g,getAdapter:x,mergeConfig:j}=a(83464).default}},function(e){e.O(0,[2292,2586,3464,7648,3537,8206,6474,4520,1008,2971,2117,1744],function(){return e(e.s=15030)}),_N_E=e.O()}]);