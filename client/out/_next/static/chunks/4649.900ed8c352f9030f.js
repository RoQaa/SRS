"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4649],{54649:function(e,a,t){t.r(a);var r=t(57437),o=t(45394),n=t(50984),c=t(64301),d=t(27648),s=t(2265);a.default=e=>{let{locale:a,slug:t,scope:l=!0,currentProject:i,currentProduct:u}=e,{productsData:p}=(0,o.C)(e=>e.products),{scopesData:f}=(0,o.C)(e=>e.scopes),g=(0,o.T)();if((0,s.useEffect)(()=>{l?g((0,c.qL)()):(async()=>{p.length<1&&await g((0,n.t2)())})()},[g,p,l]),!a||!t)return console.error("Invalid locale or slug provided to SideMenu."),null;let h=p&&p.filter(e=>e.published),v=f.filter(e=>e.published);return(0,r.jsx)("ul",{children:(l?v:h||[]).map((e,o)=>{var n,c;return(0,r.jsx)("li",{className:l||u?"en"===a&&e.slug===t||"en"!==a&&e.slug_ar===t?"active":"":e._id===(null==i?void 0:null===(n=i.category)||void 0===n?void 0:n._id)?"active":"",children:(0,r.jsx)(d.default,{href:l?"/".concat(a,"/our-scopes/").concat("en"===a?"".concat(e.slug,"?id=").concat(e._id):"".concat(e.slug_ar,"?id=").concat(e._id)):"/".concat(a,"/products/").concat("en"===a?"".concat(e.slug,"?id=").concat(e._id):"".concat(e.slug_ar,"?id=").concat(e._id)),children:l?"en"===a?e.service.toUpperCase():e.service_ar:"en"===a?null===(c=e.name)||void 0===c?void 0:c.toUpperCase():e.name_ar})},o)})})}},64301:function(e,a,t){t.d(a,{Eb:function(){return l},kQ:function(){return i},qL:function(){return s},r7:function(){return f},zd:function(){return u}});var r=t(1455),o=t(83464),n=t(43577),c=t(64131);let d="".concat("https://stagingsrv.gazala.net/api","/edit-website/scopes"),s=(0,r.hg)("scopes/fetchScopes",async(e,a)=>{let{rejectWithValue:t}=a;try{let e=await o.default.get(d,{headers:{Authorization:"Bearer ".concat(c.Z.get("auth_token"))}});if(200!==e.status)return console.error("Error: ".concat(e.status," - ").concat(e.statusText)),[];return e.data.data}catch(e){if(console.error("Fetch scopes error:",e),e instanceof n.d7){var r;return t((null==e?void 0:null===(r=e.response)||void 0===r?void 0:r.data)||"Failed to fetch scopes")}return[]}}),l=(0,r.hg)("scopes/fetchScopeById",async(e,a)=>{let{rejectWithValue:t}=a;try{let a=await o.default.get("".concat(d,"/").concat(e),{headers:{Authorization:"Bearer ".concat(c.Z.get("auth_token"))}});if(200!==a.status)return t(a.data.message||"Failed to fetch scope item.");return a.data.data}catch(e){if(e instanceof n.d7){var r;return t((null==e?void 0:null===(r=e.response)||void 0===r?void 0:r.data)||"An unexpected error occurred.")}}}),i=(0,r.hg)("scopes/deleteScope",async(e,a)=>{let{dispatch:t,rejectWithValue:r}=a;try{let a=await o.default.delete("".concat(d,"/").concat(e),{headers:{Authorization:"Bearer ".concat(c.Z.get("auth_token"))}});if(200!==a.status)return r(a.data.message||"Failed to delete scope item.");return t(g(e)),e}catch(e){if(e instanceof n.d7){var s;return r((null==e?void 0:null===(s=e.response)||void 0===s?void 0:s.data)||"An unexpected error occurred.")}}}),u=(0,r.hg)("scopes/updateScope",async(e,a)=>{let{updatedScope:t,id:r}=e,{dispatch:s,rejectWithValue:l}=a;try{let e=await o.default.patch("".concat(d,"/").concat(r),t,{headers:{Authorization:"Bearer ".concat(c.Z.get("auth_token"))}});if(200!==e.status)return l(e.data.message||"Failed to update scope item.");let a=e.data;return s(h(a)),a}catch(e){if(e instanceof n.d7){var i;return l((null==e?void 0:null===(i=e.response)||void 0===i?void 0:i.data)||"An unexpected error occurred.")}}}),p=(0,r.oM)({name:"scopes",initialState:{scopesData:[],activeTab:"1",currentScope:null,loading:!1,error:null},reducers:{setActiveTab:(e,a)=>{e.activeTab=a.payload},removeScope:(e,a)=>{e.scopesData=e.scopesData.filter(e=>e._id!==a.payload)},setCurrentScope:(e,a)=>{e.currentScope=a.payload},clearCurrentScope:e=>{e.currentScope=null}},extraReducers:e=>{e.addCase(s.pending,e=>{e.loading=!0,e.error=null}).addCase(s.fulfilled,(e,a)=>{e.loading=!1,e.scopesData=a.payload}).addCase(s.rejected,(e,a)=>{e.loading=!1,e.error=a.error.message||"Failed to load scopes data."}).addCase(l.pending,e=>{e.loading=!0,e.error=null}).addCase(l.fulfilled,(e,a)=>{e.loading=!1,e.currentScope=a.payload}).addCase(l.rejected,(e,a)=>{e.loading=!1,e.error=a.error.message||"Unknown error"}).addCase(u.pending,e=>{e.loading=!0,e.error=null}).addCase(u.fulfilled,(e,a)=>{e.loading=!1;let t=e.scopesData.findIndex(e=>e._id===a.payload._id);-1!==t&&(e.scopesData[t]=a.payload),e.currentScope=a.payload}).addCase(u.rejected,(e,a)=>{e.loading=!1,e.error=a.error.message||"Failed to update scope item."})}}),{setActiveTab:f,removeScope:g,setCurrentScope:h,clearCurrentScope:v}=p.actions;a.ZP=p.reducer}}]);