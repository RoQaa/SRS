(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[580],{580:function(e,t,a){Promise.resolve().then(a.bind(a,26050))},73215:function(e,t,a){"use strict";var r=a(2265),n=a(40718),i=a.n(n),l=a(36760),s=a.n(l),d=a(28137),c=["className","cssModule","innerRef","tag"];function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var u={className:i().string,cssModule:i().object,innerRef:i().oneOfType([i().object,i().string,i().func]),tag:d.iC};function m(e){var t=e.className,a=e.cssModule,n=e.innerRef,i=e.tag,l=function(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,c),u=(0,d.mx)(s()(t,"card-body"),a);return r.createElement(void 0===i?"div":i,o({},l,{className:u,ref:n}))}m.propTypes=u,t.Z=m},99914:function(e,t,a){"use strict";var r=a(2265),n=a(40718),i=a.n(n),l=a(36760),s=a.n(l),d=a(28137),c=["className","cssModule","fluid","tag"];function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var u={tag:d.iC,fluid:i().oneOfType([i().bool,i().string]),className:i().string,cssModule:i().object};function m(e){var t=e.className,a=e.cssModule,n=e.fluid,i=e.tag,l=function(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,c),u="container";!0===n?u="container-fluid":n&&(u="container-".concat(n));var m=(0,d.mx)(s()(t,u),a);return r.createElement(void 0===i?"div":i,o({},l,{className:m}))}m.propTypes=u,t.Z=m},79205:function(e,t,a){"use strict";var r=a(57437);a(2265),t.Z=e=>{let{iconId:t,className:a,style:n}=e;return(0,r.jsx)("svg",{className:a,style:n,children:(0,r.jsx)("use",{href:"/assets/svg/icon-sprite.svg#".concat(t)})})}},26050:function(e,t,a){"use strict";a.d(t,{default:function(){return T}});var r=a(57437),n=a(2265),i=a(99914),l=a(50288),s=a(98723),d=a(65051),c=a(73215),o=a(77314),u=a(99376),m=a(43207),f=a(82097);let h=e=>{let{lang:t="en"}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(l.Z,{children:(0,r.jsx)(s.Z,{children:(0,r.jsxs)(m.Z,{children:[(0,r.jsx)(f.Z,{check:!0,children:"en"===t?"Title":"Title (Arabic)"}),(0,r.jsx)(o.gN,{name:"en"===t?"title":"title_ar",type:"text",className:"form-control",placeholder:"Enter Title"}),"en"===t?(0,r.jsx)(o.Bc,{name:"title",component:"span",className:"text-danger"}):(0,r.jsx)(o.Bc,{name:"title_ar",component:"span",className:"text-danger"})]})})})})};var g=a(42586),p=a(27648),v=a(80201);let j=e=>{let{id:t="",type:a}=e,n=(0,g.useLocale)();return(0,r.jsx)(l.Z,{children:(0,r.jsx)(s.Z,{children:(0,r.jsxs)("div",{className:"text-end",children:[(0,r.jsx)(v.Z,{type:"submit",color:"success",className:"me-3",children:t?"Update":"Create"}),(0,r.jsx)(p.default,{className:"btn btn-danger",href:"Image"===a?"".concat("https://stagingsrv.gazala.net","/").concat(n,"/dashboard/media/images/"):"".concat("https://stagingsrv.gazala.net","/").concat(n,"/dashboard/media/videos/"),children:"Cancel"})]})})})};var y=a(94926),x=a(79205),b=a(71008),I=a(180),N=a(48055),w=a(18206);let Z=["image/jpeg","image/png","image/gif","image/webp"];var O=e=>{let{setFieldValue:t,imgName:a,label:i,oldImage:l}=e,[s]=(0,n.useState)([]),[d,c]=(0,n.useState)(null),u=e=>{if(e.file){if(!Z.includes(e.file.type))return w.Am.error("Invalid file type. Allowed types are PNG, JPEG, GIF, and WebP."),!1;if(e.file.size>5242880)return w.Am.error("File size exceeds 5 MB limit."),!1}return!0},m=e=>{c(e),t(a,e.file)};return(0,n.useEffect)(()=>{(async()=>{if(l.length>0)try{let e=(0,N.w)(l),t=await (0,I.f)(l,e);if(t instanceof File){let e={id:t.name,file:t,name:t.name,size:t.size,type:t.type,preview:!0};c(e)}else console.error("Image is not a valid file.")}catch(e){console.error("Failed to load image:",e)}})()},[l]),(0,r.jsx)("div",{className:"sidebar-body mt-4",children:(0,r.jsxs)("div",{className:"product-upload",children:[(0,r.jsxs)("p",{children:[i," ",(0,r.jsx)("span",{className:"txt-danger",children:" *"})]}),(0,r.jsxs)(y.fh,{onChange:e=>{let t=e.filter(u);t.length>0&&m(t[0])},value:d?[d]:[],maxFiles:1,header:!1,footer:!1,minHeight:"80px",name:a,children:[d&&(0,r.jsx)(y.Q$,{...d,onDelete:()=>{c(null),t(a,null)},info:!0,preview:!0},d.id),0===s.length&&!d&&(0,r.jsxs)("div",{className:"dz-message needsclick",children:[(0,r.jsx)(x.Z,{iconId:"file-upload"}),(0,r.jsxs)("h5",{children:["Drag your image here, or",(0,r.jsx)(p.default,{className:"txt-primary",href:b.zOc,children:"\xa0browse"})]}),(0,r.jsx)("span",{className:"note needsclick",children:"SVG, PNG, JPG or GIF"})]})]}),(0,r.jsx)(o.Bc,{name:a,component:"span",className:"text-danger"}),(0,r.jsx)("br",{})]})})},F=a(34422),C=a(45394),E=a(45288);let M=()=>(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(l.Z,{children:(0,r.jsx)(s.Z,{children:(0,r.jsxs)(m.Z,{children:[(0,r.jsx)(f.Z,{check:!0,children:"Video Link"}),(0,r.jsx)(o.gN,{name:"video",type:"text",className:"form-control",placeholder:"Enter Video Link"}),(0,r.jsx)(o.Bc,{name:"video",component:"span",className:"text-danger"})]})})})});var _=e=>{let{type:t}=e,a=(0,u.useRouter)(),n=(0,C.T)(),i=(0,g.useLocale)(),l=async e=>{let r=new FormData;Object.keys(e).forEach(t=>{"thumbnail"!==t&&"fullImage"!==t&&void 0!==e[t]&&null!==e[t]&&r.append(t,String(e[t]))}),"Image"===t?(e.thumbnail&&r.append("thumbnail",e.thumbnail),e.fullImage&&r.append("fullImage",e.fullImage),r.delete("video")):e.video&&(r.delete("thumbnail"),r.delete("fullImage"));try{await n((0,E.ph)(r)).unwrap(),w.Am.success("Media Created successfully!"),"Image"===t?a.push("/".concat(i,"/dashboard/media/images")):a.push("/".concat(i,"/dashboard/media/videos"))}catch(e){e instanceof Error?(w.Am.error(e.message||"Error Creating Media."),console.error("Error Creating Media:",e.message)):w.Am.error("Error Creating Media.")}};return(0,r.jsx)(o.J9,{initialValues:{title:"",title_ar:"",type:"Image"===t?"Image":"Video",thumbnail:"",fullImage:"",video:"",published:!0},validationSchema:"Image"===t?k:A,onSubmit:l,children:e=>{let{setFieldValue:a}=e;return(0,r.jsxs)(o.l0,{className:"theme-form",children:[(0,r.jsx)(h,{lang:"en"}),"Image"===t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(O,{oldImage:"",imgName:"thumbnail",label:"Thumbnail Image",setFieldValue:a}),(0,r.jsx)(O,{oldImage:"",imgName:"fullImage",label:"Full Image",setFieldValue:a})]}):(0,r.jsx)(M,{}),(0,r.jsxs)("h3",{className:"py-2 my-3",children:[(0,r.jsx)("span",{className:"text-danger",children:"*"}),"Add Details In Arabic"]}),(0,r.jsx)(h,{lang:"ar"}),(0,r.jsx)(j,{id:"",type:t})]})}})};let k=F.Ry().shape({title:F.Z_().required("Title is required").matches(/^[A-Za-z0-9\s.,:;!?'"()\[\]{}\-…&]+$/u,"English Title contains invalid characters"),title_ar:F.Z_().required("Arabic Title is required").matches(/^[\u0600-\u06FF0-9\s.,،؛:؟!"'()\[\]{}\-…&]+$/u,"Arabic Title contains invalid characters"),published:F.O7().required("Published status is required")}),A=F.Ry().shape({title:F.Z_().required("Title is required").matches(/^[A-Za-z0-9\s.,:;!?'"()\[\]{}\-…&]+$/u,"English Title contains invalid characters"),title_ar:F.Z_().required("Arabic Title is required").matches(/^[\u0600-\u06FF0-9\s.,،؛:؟!"'()\[\]{}\-…&]+$/u,"Arabic Title contains invalid characters"),video:F.Z_().url().required("Video Link is required"),published:F.O7().required("Published status is required")});var T=e=>{let{type:t=""}=e;return(0,r.jsx)(i.Z,{fluid:!0,children:(0,r.jsx)(l.Z,{children:(0,r.jsx)(s.Z,{sm:"12",children:(0,r.jsx)(d.Z,{children:(0,r.jsx)(c.Z,{children:(0,r.jsx)(_,{type:t})})})})})})}},45394:function(e,t,a){"use strict";a.d(t,{C:function(){return i},T:function(){return n}});var r=a(68575);let n=r.I0,i=r.v9},45288:function(e,t,a){"use strict";a.d(t,{D6:function(){return d},hV:function(){return u},iT:function(){return f},ph:function(){return o}});var r=a(1455),n=a(83464),i=a(43577),l=a(64131);let s="".concat("https://stagingsrv.gazala.net/api","/edit-website/media"),d=(0,r.hg)("media/fetchMediaItems",async(e,t)=>{let{rejectWithValue:a}=t;try{return(await n.default.get(s,{headers:{Authorization:"Bearer ".concat(l.Z.get("auth_token"))}})).data.data}catch(e){if(e instanceof i.d7){var r;return a((null==e?void 0:null===(r=e.response)||void 0===r?void 0:r.data)||"Failed to fetch media items")}}}),c=(0,r.hg)("media/fetchMediaItemById",async(e,t)=>{let{rejectWithValue:a}=t;try{return(await n.default.get("".concat(s,"/").concat(e),{headers:{Authorization:"Bearer ".concat(l.Z.get("auth_token"))}})).data.data}catch(e){if(e instanceof i.d7){var r;return a((null==e?void 0:null===(r=e.response)||void 0===r?void 0:r.data)||"Failed to fetch media by ID")}}}),o=(0,r.hg)("media/addMediaItem",async(e,t)=>{let{rejectWithValue:a}=t;try{return(await n.default.post(s,e,{headers:{Authorization:"Bearer ".concat(l.Z.get("auth_token"))}})).data}catch(e){if(e instanceof i.d7){var r;return a((null==e?void 0:null===(r=e.response)||void 0===r?void 0:r.data)||"Failed to add media item")}}}),u=(0,r.hg)("media/deleteMediaItem",async(e,t)=>{let{dispatch:a,rejectWithValue:r}=t;try{return await n.default.delete("".concat(s,"/").concat(e),{headers:{Authorization:"Bearer ".concat(l.Z.get("auth_token"))}}),a(p(e)),e}catch(e){if(e instanceof Error)return r(e.message||"Failed to delete media item")}}),m=(0,r.oM)({name:"media",initialState:{mediaItems:[],currentMediaItem:null,loading:!1,error:null},reducers:{resetError(e){e.error=null},clearCurrentMediaItem(e){e.currentMediaItem=null},removeMediaItem:(e,t)=>{e.mediaItems=e.mediaItems.filter(e=>e._id!==t.payload)}},extraReducers:e=>{e.addCase(d.pending,e=>{e.loading=!0,e.error=null}).addCase(d.fulfilled,(e,t)=>{e.loading=!1,e.mediaItems=t.payload}).addCase(d.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(c.pending,e=>{e.loading=!0,e.error=null}).addCase(c.fulfilled,(e,t)=>{e.loading=!1,e.currentMediaItem=t.payload}).addCase(c.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(o.pending,e=>{e.loading=!0,e.error=null}).addCase(o.fulfilled,(e,t)=>{e.mediaItems.push(t.payload)}).addCase(o.rejected,(e,t)=>{e.error=t.payload})}}),f=e=>t=>t.media.mediaItems.filter(t=>t.type===e),{resetError:h,clearCurrentMediaItem:g,removeMediaItem:p}=m.actions;t.ZP=m.reducer},180:function(e,t,a){"use strict";a.d(t,{f:function(){return r}});let r=async(e,t)=>{if(e instanceof File)return e;if(!e||"string"!=typeof e)throw Error("Invalid URL provided: "+e);try{let a=await fetch(e);if(!a.ok){if(404===a.status)return console.warn("File not found at URL: ".concat(e)),new File([],t);throw Error("Failed to fetch image from URL: ".concat(e))}let r=await a.blob();return new File([r],t,{type:r.type})}catch(e){return console.error("Error converting URL to file:",e),new File([],t)}}},48055:function(e,t,a){"use strict";a.d(t,{w:function(){return r}});let r=e=>{try{return new URL(e).pathname.split("/").pop()||"default_filename.png"}catch(t){return console.error("Invalid URL provided:",e),"default_filename.png"}}},43577:function(e,t,a){"use strict";a.d(t,{d7:function(){return n}});let{Axios:r,AxiosError:n,CanceledError:i,isCancel:l,CancelToken:s,VERSION:d,all:c,Cancel:o,isAxiosError:u,spread:m,toFormData:f,AxiosHeaders:h,HttpStatusCode:g,formToJSON:p,getAdapter:v,mergeConfig:j}=a(83464).default}}]);